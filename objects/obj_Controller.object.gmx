<!--This Document is generated by GameMaker, if you edit it by hand then you do so at your own risk!-->
<object>
  <spriteName>&lt;undefined&gt;</spriteName>
  <solid>0</solid>
  <visible>-1</visible>
  <depth>-1700</depth>
  <persistent>0</persistent>
  <parentName>&lt;undefined&gt;</parentName>
  <maskName>&lt;undefined&gt;</maskName>
  <events>
    <event eventtype="0" enumb="0">
      <action>
        <libid>1</libid>
        <id>603</id>
        <kind>7</kind>
        <userelative>0</userelative>
        <isquestion>0</isquestion>
        <useapplyto>-1</useapplyto>
        <exetype>2</exetype>
        <functionname></functionname>
        <codestring></codestring>
        <whoName>self</whoName>
        <relative>0</relative>
        <isnot>0</isnot>
        <arguments>
          <argument>
            <kind>1</kind>
            <string>/*INI OPENING*/
ini_open('options.ini')


/*AUDIO SETUP*/

//music table
music[0]=mu_ItsTooQuiet
music[1]=mu_Careful
music[2]=mu_SweepingMines
music[3]=mu_TickingSoFast
music[4]=mu_Minefield

//index determines song to play
index=random_range(0,5)

//music volume
volume=ini_read_real('settings','volume',0.5);


audio_play_sound(music[index],1,true);
audio_sound_gain(music[index],volume,0)


/*VIDEO SETUP*/

fullscreen=ini_read_real('settings','fullscreen',false);
window_set_fullscreen(fullscreen);

/*GAME SETUP*/

disarmed_mines=0;
game_state="running"
lifes=3;
//fonts
draw_set_font(military_font);
draw_set_colour(c_white);

easy_mode=ini_read_real('settings','easy_mode',false);

//level setup
next_level=""
level=""

/*INI CLOSING*/
ini_close();

/* STORY MODE ONLY */
if(room!=rm_Randomized){
    time=current_time
    lifes=1;
    
    //hiscore read
    ini_open('hiscores.ini')
    best_time=ini_read_real('levels',level,9999)
    ini_close()
}

</string>
          </argument>
        </arguments>
      </action>
    </event>
    <event eventtype="2" enumb="0">
      <action>
        <libid>1</libid>
        <id>603</id>
        <kind>7</kind>
        <userelative>0</userelative>
        <isquestion>0</isquestion>
        <useapplyto>-1</useapplyto>
        <exetype>2</exetype>
        <functionname></functionname>
        <codestring></codestring>
        <whoName>self</whoName>
        <relative>0</relative>
        <isnot>0</isnot>
        <arguments>
          <argument>
            <kind>1</kind>
            <string>/*VICTORY EVENT FOR STORY MODE*/

game_state="completed"
time=(current_time-time)/1000
instance_create(room_width/2,room_height/2,obj_MissionCompleted)

if(time&lt;best_time){
    show_message("A NEW RECOOORD! "+string(time)+" "+string(disarmed_mines))  
    ini_open('hiscores.ini')
    ini_write_real('levels',level,time);
    ini_close();
    best_time=time;    
} 
obj_MissionCompleted.next=next_level;   
obj_MissionCompleted.time=string(time);
obj_MissionCompleted.best_time=string(best_time);
audio_stop_sound(snd_BeepingNormal);
audio_stop_sound(snd_BeepingDanger);
audio_stop_sound(snd_BeepingFaster);
with(obj_Player){instance_destroy()}
instance_destroy();
</string>
          </argument>
        </arguments>
      </action>
    </event>
    <event eventtype="3" enumb="0">
      <action>
        <libid>1</libid>
        <id>603</id>
        <kind>7</kind>
        <userelative>0</userelative>
        <isquestion>0</isquestion>
        <useapplyto>-1</useapplyto>
        <exetype>2</exetype>
        <functionname></functionname>
        <codestring></codestring>
        <whoName>self</whoName>
        <relative>0</relative>
        <isnot>0</isnot>
        <arguments>
          <argument>
            <kind>1</kind>
            <string>/*GAME OVER EVENT*/

if(lifes&lt;=0){
obj_Player.alarm[3]=1;
instance_create(room_width/2,room_height/2,obj_GameOver)
game_state="over"

}
/*VICTORY TRIGGER*/

if(!instance_exists(obj_Mine)){
    //for randomized
    if(room==rm_Randomized)instance_create(room_width/2,room_height/2,obj_Victory)
    //for story mode
    else alarm[0]=1
    }
</string>
          </argument>
        </arguments>
      </action>
    </event>
    <event eventtype="5" enumb="13">
      <action>
        <libid>1</libid>
        <id>603</id>
        <kind>7</kind>
        <userelative>0</userelative>
        <isquestion>0</isquestion>
        <useapplyto>-1</useapplyto>
        <exetype>2</exetype>
        <functionname></functionname>
        <codestring></codestring>
        <whoName>self</whoName>
        <relative>0</relative>
        <isnot>0</isnot>
        <arguments>
          <argument>
            <kind>1</kind>
            <string>//temporary victory trigger
alarm[0]=1

</string>
          </argument>
        </arguments>
      </action>
    </event>
    <event eventtype="8" enumb="0">
      <action>
        <libid>1</libid>
        <id>603</id>
        <kind>7</kind>
        <userelative>0</userelative>
        <isquestion>0</isquestion>
        <useapplyto>-1</useapplyto>
        <exetype>2</exetype>
        <functionname></functionname>
        <codestring></codestring>
        <whoName>self</whoName>
        <relative>0</relative>
        <isnot>0</isnot>
        <arguments>
          <argument>
            <kind>1</kind>
            <string>/*GAME STATUS*/

if(instance_exists(obj_Player))
if(easy_mode)draw_text(0,0,"Distance to mine: "+string(obj_Player.distance_to_mine));
draw_text(0,32,"Disarmers left: "+string(obj_Player.disarmers_left))
draw_text(0,64," Soldiers left: "+string(lifes))
</string>
          </argument>
        </arguments>
      </action>
    </event>
    <event eventtype="9" enumb="27">
      <action>
        <libid>1</libid>
        <id>603</id>
        <kind>7</kind>
        <userelative>0</userelative>
        <isquestion>0</isquestion>
        <useapplyto>-1</useapplyto>
        <exetype>2</exetype>
        <functionname></functionname>
        <codestring></codestring>
        <whoName>self</whoName>
        <relative>0</relative>
        <isnot>0</isnot>
        <arguments>
          <argument>
            <kind>1</kind>
            <string>/*MENU TRIGGER*/

if(game_state=="running"){
game_state="pause";
instance_create(512,384,obj_Menu);
}

</string>
          </argument>
        </arguments>
      </action>
    </event>
    <event eventtype="9" enumb="16">
      <action>
        <libid>1</libid>
        <id>603</id>
        <kind>7</kind>
        <userelative>0</userelative>
        <isquestion>0</isquestion>
        <useapplyto>-1</useapplyto>
        <exetype>2</exetype>
        <functionname></functionname>
        <codestring></codestring>
        <whoName>self</whoName>
        <relative>0</relative>
        <isnot>0</isnot>
        <arguments>
          <argument>
            <kind>1</kind>
            <string>/*ONLY FOR TEST PURPOSES*/

//delete when development is over

ini_open('hiscores.ini')
ini_write_real('levels',string(room),9999)
ini_close()
audio_stop_all();
</string>
          </argument>
        </arguments>
      </action>
      <action>
        <libid>1</libid>
        <id>223</id>
        <kind>0</kind>
        <userelative>0</userelative>
        <isquestion>0</isquestion>
        <useapplyto>0</useapplyto>
        <exetype>1</exetype>
        <functionname>action_current_room</functionname>
        <codestring></codestring>
        <whoName>self</whoName>
        <relative>0</relative>
        <isnot>0</isnot>
      </action>
    </event>
  </events>
  <PhysicsObject>0</PhysicsObject>
  <PhysicsObjectSensor>0</PhysicsObjectSensor>
  <PhysicsObjectShape>0</PhysicsObjectShape>
  <PhysicsObjectDensity>0.5</PhysicsObjectDensity>
  <PhysicsObjectRestitution>0.100000001490116</PhysicsObjectRestitution>
  <PhysicsObjectGroup>0</PhysicsObjectGroup>
  <PhysicsObjectLinearDamping>0.100000001490116</PhysicsObjectLinearDamping>
  <PhysicsObjectAngularDamping>0.100000001490116</PhysicsObjectAngularDamping>
  <PhysicsObjectFriction>0.200000002980232</PhysicsObjectFriction>
  <PhysicsObjectAwake>-1</PhysicsObjectAwake>
  <PhysicsObjectKinematic>0</PhysicsObjectKinematic>
  <PhysicsShapePoints/>
</object>
